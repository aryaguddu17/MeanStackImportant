<div class="dash-head">
  <p>Job List</p>
</div>

<!-- <div *ngIf="HideCommon==1">
  <app-Common-Layout (clicked)="onClicked($event)" (backcliked)="onbackregist()"></app-Common-Layout>
</div> -->
<!-- <div *ngIf="HideCommon==2">
  <div class="dash-head">
    <a (click)="goToCommon()" title="Go To Common" class="btn btn-w-shadow no-rd pull-right" tabindex="0">
      Back
    </a>
    <div class="clearfix"></div>
  </div>
</div> -->

<!-- code added by prakash Singh for company List 18-04-2019 -->
<!-- <div *ngIf="HideCommon==1"> -->
<div [ngClass]="HideCommon=='1'?'show':'hide'">
  <div class="page-filters" [ngClass]="ShowCompanyFilter=='1'?'show':'hide'">
    <h2>
      <a href="javascript:void(0);">
        <i class="fa fa-filter" aria-hidden="true"></i> Apply Filters
        <span><i class="fa fa-chevron-down" aria-hidden="true"></i></span>
      </a>
    </h2>
    <form (submit)="GetFilterCompany(0,'','search')" [formGroup]="ComapanyFilterJob">
      <div class="filter-wrapper">
        <div class="form-group">
          <div class="col-md-3 col-sm-6">
            <label>Login Type</label>
            <select class="form-control" formControlName="logintype">
              <option value="" selected>--Select--</option>
              <option value="Agency">Agency</option>
              <option value="Employer">Employer</option>
            </select>
          </div>
          <div class="col-md-3 col-sm-6">
            <label>State</label>
            <select class="form-control" required formControlName="StateiD" (change)="GetAllDistrict($event.target.value)">
              <option value="" selected>--Select--</option>
              <option *ngFor="let st of states" [value]="st.id">{{st.stateName}}</option>
            </select>
          </div>
          <div class="col-md-3 col-sm-6">
            <label>District</label>
            <select class="form-control" #val required formControlName="DistrictID">
              <option value="" selected="selected">--Select--</option>
              <option *ngFor="let district of district1" [value]="district.id">{{district.districtName}}</option>
            </select>
          </div>

          <div class="col-md-3 col-sm-3">
            <label>Search Keywords<span></span></label>
            <input type="text" class="form-control" formControlName="JobKeyword" placeholder="Search" />
          </div>

          <div class="col-md-3 col-sm-6">
            <label>Job Created</label>
            <select class="form-control" formControlName="PostType">
              <option value="" selected>--Select--</option>
              <option value="1">Yes</option>
              <option value="2">No</option>
            </select>
          </div>
        </div>
        <div class="form-group text-center m-t-10">
          <button type="reset" (click)="Comapanyreset()" class="btn btn-w-shadow no-rd">Reset</button>
          <button type="submit" class="btn btn-w-shadow no-rd filter-toggle">Search</button>
        </div>
        <div class="form-group text-center m-t-10">
        </div>
      </div>
    </form>
  </div>

  <div class="col-md-12" *ngIf="hrefurl=='1'">
    <div class="col-md-12 jd-detail job-wrapper searchResults">
      <h4>Search Result</h4>
      <div class="form-group">
        <p class="col-md-4">
          <span class="text-strong">Login Type</span>: {{Showpushdatacompany.logintype}}
        </p>
        <p class="col-md-4">
          <span class="text-strong">Search Keywords</span>: {{Showpushdatacompany.JobKeyword}}
        </p>
        <p class="col-md-4">
          <span class="text-strong">State</span>: {{Showpushdatacompany.StateiD ? Showpushdatacompany.StateiD :'NA'}}
        </p>
        <p class="col-md-4">
          <span class="text-strong">District</span>: {{Showpushdatacompany.Districtid ? Showpushdatacompany.Districtid
          :'NA'}}
        </p>
        <p class="col-md-4">
          <span class="text-strong">Job Created</span>: {{Showpushdatacompany.JobPosted }}
        </p>
      </div>
    </div>
  </div>
  <!-- <div class="legend-text" *ngIf="(backbtn=='1')">
  <a href="javascript:void(0)" (click)="back()" class="btn pull-right btn-back-reg">
      <i aria-hidden="true" class="fa fa-arrow-left"></i>
      Back
  </a>
</div> -->
  <!-- {{companyregisterdata|json}} -->
  <div class="col-md-12" *ngIf="CompanyList=='1'" id="comp">
    <div class="form-group">

      <div class="col-md-4 col-sm-12 col-xs-12 col-md-offset-8 p-r-0">
        <div class="legends">
          <ul>
            <li><span class="l2"></span>Job Posted</li>
            <li><span class="l1"></span> Job not Posted</li>
          </ul>
        </div>
      </div>
    </div>
    <div class="all-jobs-list">
      <div class="searchResults ">

        <ul class="joblist-wrapper">
          <li class="job-wrapper ps-relative {{item.noofjobposted>='1'?'approved':'disapproved'}}" *ngFor="let item of companyregisterdata"
            [style.background-color]="item.companyid==compid ? '#d4d0d0' : 'none' ">
            <div class="job-view fos">
              <div>
                <img onError="this.src='../../../../assets/images/NoImage.png'" src="{{item.comapanyimgname!=''?item.comapanyimgname:'assets/images/NoImage.png'}}"
                  class="img-thumbnail" alt="Image">
              </div>
              <div>
                <h2 *ngIf="item.companyname!=null" class="job-title 1a" title="{{item.companyname}}">
                  <!-- {{item.companyname?item.companyname:'NA'}} -->
                  {{ (item.companyname.length>50)? (item.companyname | slice:0:50)+'...':(item.companyname) }}
                </h2>
                <div class="clearfix"></div>

                <div class="form-group">
                  <div class="row">
                    <!-- <div class="col-md-6 lang-ellip"><strong>Name : </strong> {{item.FIRSTNAME}}</div> -->
                    <div class="col-md-6"><strong>Login Type : </strong> {{item.logintype?item.logintype:'NA'}}</div>
                    <div *ngIf="item.email!=null" class="col-md-6" title="{{item.email}}"><strong>Email : </strong>
                      <!-- {{item.email?item.email:'NA'}} -->

                      {{ (item.email.length>50)? (item.email | slice:0:50)+'...':(item.email) }}
                    </div>
                  </div>
                </div>
                <div class="form-group">
                  <div class="row">
                    <div class="col-md-6"><strong>Mobile : </strong> {{item.phoneno?item.phoneno:'NA'}}</div>
                    <div class="col-md-6"><strong>PAN : </strong> {{item.pancard?item.pancard:'NA'}}</div>

                  </div>
                </div>
                <div class="form-group">
                  <div class="row">
                    <div class="col-md-12"><strong>GSTIN : </strong> {{item.gstno?item.gstno:'NA'}}</div>
                    <!-- <div class="col-md-6"><strong>PAN : </strong> {{item.pancard?item.pancard:'NA'}}</div> -->

                  </div>
                </div>
                <div class="form-group">
                  <div class="row">
                    <div class="col-md-6"><strong>State : </strong> {{item.statename ? item.statename:'NA'}}</div>
                    <div class="col-md-6"><strong>District : </strong> {{item.districtname ? item.districtname:'NA'}}</div>
                  </div>
                </div>

                <div class="form-group">
                  <div class="row">
                    <div class="col-md-6"><strong>No. of Created Job : </strong>
                      {{item.noofjobs?item.noofjobs:'0'}}
                    </div>

                    <div class="col-md-6"><strong>No. of Posted Job : </strong>
                      {{item.noofjobposted ? item.noofjobposted:'0'}}
                    </div>

                  </div>
                </div>
                <div class="form-group">
                  <div class="job-list-action card-view-btns">
                    <a class="viewit" href="javascript:void(0)" (click)="ViewCompanyData(item.companyid)">View</a>
                    <!-- <a class="postit" href="javascript:void(0)" (click)="deletedata(item.COMPANYID)">Delete</a> -->
                  </div>
                </div>
              </div>
            </div>



          </li>
        </ul>
      </div>
    </div>
  </div>

  <!-- End code added by prakash Singh for company List 18-04-2019 -->

</div>
<!---  sepcial div case-->

<div *ngIf="HideCommon=='2'">
  <!--  specail div2 show   -->
  <div class="dash-head" *ngIf="(backbtn=='1')">
    <a href="javascript:void(0)" (click)="Companyback()" class="btn pull-right btn-back-reg">
      <!-- <i aria-hidden="true" class="fa fa-arrow-left"></i> -->
      Back
    </a>
    <a class="btn btn-w-shadow no-rd pull-right" tabindex="0" [routerLink]="'/CreateJob'" [queryParams]="{companyid:companyId}">Create
      Job</a>
  </div>
  <!-- <div class="dash-head" *ngIf="joblistshow=='1'">
   
  </div> -->
  <div class="cleafix"></div>

  <!-- JobSearch -->

  <div class="page-filters" [ngClass]="(joblistshow=='1')?'show':'hide'">
    <h2>
      <a href="javascript:void(0);">
        <i class="fa fa-filter" aria-hidden="true"></i> Apply Filters
        <span><i class="fa fa-chevron-down" aria-hidden="true"></i></span>
      </a>
    </h2>
    <form (submit)="GetFilterJobsList(0,'')" [formGroup]="FilterJobList">
      <div class="filter-wrapper">
        <div class="form-group">
          <div class="col-md-3 col-sm-6">
            <label>Industry</label>
            <select class="form-control" formControlName="industry">
              <option value="" selected>Select</option>
              <option *ngFor="let item of IndustryArea" value="{{item.id}}">{{item.industryName}}</option>
            </select>

          </div>
          <div class="col-md-3 col-sm-6">
            <label>Functional Area</label>
            <select class="form-control" formControlName="functionalarea">
              <option value="" class="" selected="selected">Select</option>
              <option *ngFor="let item of FunctionArea" value="{{item.id}}">{{item.functionalAreaName}}</option>
            </select>
          </div>
          <div class="col-md-3 col-sm-6">
            <label>From Date </label>
            <input readonly type="text" placeholder="Select Date" class="form-control" formControlName="walkInFromDate"
              [bsConfig]="{ dateInputFormat: 'DD/MM/YYYY',showWeekNumbers:false}" [maxDate]="maxDate" (bsValueChange)="MinDate($event)"
              bsDatepicker>

          </div>
          <div class="col-md-3 col-sm-6">
            <label>To Date </label>
            <input readonly type="text" placeholder="Select Date" class="form-control" formControlName="walkInToDate"
              [bsConfig]="{ dateInputFormat: 'DD/MM/YYYY',showWeekNumbers:false}" [minDate]="minDate" (bsValueChange)="MaxDate($event)"
              bsDatepicker>
          </div>
        </div>

        <div class="form-group">
          <!-- <div class="col-md-3 col-sm-6">
          <div class="col-md-6 col-sm-6 p-l-0">
            <label>MIN CTC</label>
            <input disabled value="{{minCtc}}" maxlength="10" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');"
              type="text" formControlName="MinCtc" class="form-control" placeholder="MinCtc">

          </div>

          <div class="col-md-6 col-sm-6 p-r-0">
            <label>Max CTC</label>
            <input disabled value="{{maxCtc}}" maxlength="10" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');"
              type="text" formControlName="MaxCtc" class="form-control" placeholder="MaxCtc">
            <div class="custom-slider">
            </div>
          </div>
          <div class="col-md-12 col-sm-12 custom-slider mrg-min p-d-0">
            <label></label>
            <ng5-slider [(value)]="minCtc" [(highValue)]="maxCtc" [options]="CtcOptions"></ng5-slider>

          </div>
        </div> -->
          <div class="col-md-3 col-sm-6">
            <div class="col-md-6 col-sm-6 p-l-0">
              <label>Min Exp</label>
              <input disabled value="{{minExp}}" maxlength="10" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');"
                type="text" formControlName="MinExp" class="form-control" placeholder="MinExp">
            </div>

            <div class="col-md-6 col-sm-6 p-r-0">
              <label>Max Exp</label>
              <input disabled value="{{maxExp}}" maxlength="10" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');"
                type="text" formControlName="MaxExp" class="form-control" placeholder="MaxExp">
            </div>
            <div class="col-md-12 col-sm-12 custom-slider mrg-min p-d-0">
              <label></label>
              <ng5-slider [(value)]="minExp" [(highValue)]="maxExp" [options]="ExpOptions"></ng5-slider>
            </div>
          </div>

          <div class="col-md-3 col-sm-3">
            <label>Search Keywords<span></span></label>
            <input type="text" class="form-control" formControlName="JobKeyword" placeholder="Search" />
          </div>
        </div>

        <div class="row text-center m-t-5">
          <button type="reset" (click)="reset()" class="btn btn-w-shadow no-rd">Reset</button>
          <button type="submit" class="btn btn-w-shadow no-rd filter-toggle">Search</button>
        </div>
      </div>
    </form>
  </div>

  <div class="col-md-12" *ngIf="Showpushdata && searchsts==1">
    <div class="col-md-12 jd-detail job-wrapper searchResults">
      <h4>Search Result</h4>

      <div class="form-group">
        <p class="col-md-3">
          <span class="text-strong">Industry</span>: {{ShowPushData.industry}}
        </p>
        <p class="col-md-3">
          <span class="text-strong">Functional Area</span>: {{ShowPushData.functionalarea}}
        </p>
        <p class="col-md-3">
          <span class="text-strong">From Date</span>:
          {{ShowPushData.searchwalkinfromdate!='NA'?(ShowPushData.searchwalkinfromdate | date:'dd/MM/yyyy'):'NA'}}
        </p>
        <p class="col-md-3">
          <span class="text-strong">To Date</span>:
          {{ShowPushData.searchwalkintodate!='NA'?(ShowPushData.searchwalkintodate | date:'dd/MM/yyyy'):'NA'}}
        </p>

        <!-- <p class="col-md-4">
        <span class="text-strong">MIN CTC(INR)</span>: {{ShowPushData.Minctc}} Per Month
      </p>

      <p class="col-md-4">
        <span class="text-strong">Max CTC(INR)</span>: {{ShowPushData.Maxctc}} Per Month
      </p> -->

      </div>
      <div class="form-group">

        <p class="col-md-3">
          <span class="text-strong">Min Exp</span>: {{ShowPushData.MinExp}}
        </p>
        <p class="col-md-3">
          <span class="text-strong">Max Exp</span>: {{ShowPushData.MaxExp}}
        </p>
        <p class="col-md-3">
          <span class="text-strong">Search Keywords</span>: {{ShowPushData.JobKeyword}}
        </p>
      </div>

    </div>
  </div>
  <div *ngIf="norecord">No Record Found..</div>

  <div class="col-md-12" *ngIf="ShowJobList==1">
    <div class="all-jobs-list">
      <div id="" class="searchResults">
        <ul class="joblist-wrapper">

          <li class="job-wrapper ps-relative {{item.isJobPushed?'posted':''}}" *ngFor="let item of jobdetail">
            <ng-template #template>
              <div class="modal-body text-center">
                <p>Do You Want To Revoke This Job?</p>
                <br />
                <br />
                <button type="button" class="btn yl-btn no-rd" (click)="RevokeJob(item.jobId,item.userID)">Yes</button>
                <button type="button" class="btn bl-btn no-rd" (click)="declineBox()">No</button>
              </div>
            </ng-template>
            <ng-template #template2>
              <div class="modal-body text-center">
                <p>Do You Want To Post This Job?</p>
                <br />
                <br />
                <button type="button" class="btn yl-btn no-rd" (click)="PublishJob(item)">Yes</button>
                <button type="button" class="btn bl-btn no-rd" (click)="declineBox()">No</button>
              </div>
            </ng-template>
            <ng-template #template3>
              <div class="modal-body text-center">
                <p>Please Add Openings!</p>
                <br />
                <br />

                <button type="button" class="btn bl-btn no-rd" (click)="declineBox()">Ok</button>
              </div>
            </ng-template>

            <ng-template #template4>
              <div class="modal-body text-center">
                <p>Do You Want To Close This Job?</p>
                <br />
                <br />
                <button type="button" class="btn yl-btn no-rd" (click)="CloseJob(item.jobId,item.userID,'CloseJob',item)">Yes</button>
                <button type="button" class="btn bl-btn no-rd" (click)="declineBox()">No</button>
              </div>
            </ng-template>

            <ng-template #template9>
              <div class="modal-body text-center">
                <p>Do You Want To Scrap This Job?</p>
                <br />
                <br />
                <button type="button" class="btn yl-btn no-rd" (click)="scrapJob(item.jobId,item.userID,item,'scrapJob')">Yes</button>
                <button type="button" class="btn bl-btn no-rd" (click)="declineBox()">No</button>
              </div>
            </ng-template>


            <!-- <h2 class="job-title"><a href="javascript:void(0)" [routerLink]="'/ViewJob'" (click)="setId(item.jobId)">{{item.companyName}}</a></h2>
          <div class="clearfix"></div> -->

            <div class="form-group m-b-0">
              <div class="row">
                <div class="col-md-12">
                  <h2 class="job-title lang-ellip"><a href="javascript:void(0)" [routerLink]="'/ViewJob'" (click)="setId(item.jobId,item.isJobPushed,item.isScrap,item.userID)">{{item.companyName}}</a></h2>
                </div>
              </div>
            </div>

            <div class="form-group m-b-0">
              <div class="row">
                <div class="col-md-12">
                  <h3 class="company-name lang-ellip" style="text-transform:capitalize">{{item.jobTitle}} </h3>
                </div>
              </div>
            </div>
            <ul class="jd-detail">
              <li class="">
                <span class="ellip-view"><strong>Job Code:</strong></span><span class="text-strong"> {{item.jobcode}}</span>
              </li>
              <li><span>
                  <strong>Valid Upto :</strong>
                </span> <span class="">{{item.validDate | date:
                  'dd/MM/yyyy'}}</span></li>
            </ul>

            <ul class="jd-detail">
              <li><span> <strong>No. of Vacancies :</strong></span> <span class="">{{item.noofvacancy}}</span></li>
              <li class="lang-ellip">
                <span class="ellip-view"><strong>Job Description:</strong> {{item.jobDescription}}</span>
              </li>
            </ul>
            <ul class="jd-detail">
              <li><span> <strong>Min Experience :</strong></span> <span class="">{{item.minExp!=0?item.minExp:'NA'}}</span></li>
              <li class="lang-ellip">
                <span class="ellip-view"><strong>Max Experience :</strong> {{item.maxExp!=0?item.maxExp:'NA'}}</span>
              </li>
            </ul>
            <ul class="jd-detail">
              <li><span> <strong>Min CTC(INR) :</strong></span> <span class="">{{item.minctc!="0.00"?item.minctc:'NA'}}</span></li>
              <li class="lang-ellip">
                <span class="ellip-view"><strong>Max CTC(INR) :</strong> {{item.maxctc!="0.00"?item.maxctc:'NA'}}</span>
              </li>
            </ul>

            <ul class="jd-detail">
              <li><span> <strong>Industry :</strong></span> <span class="">{{item.industryArea}}</span></li>
              <li>
                <span><strong>Functional Area :</strong> </span><span class="">{{item.functionalArea}}</span>
              </li>
            </ul>
            <ul class="jd-detail">
              <li class="lang-ellip"><span> <strong> Contact Person :</strong></span> <span class="">{{item.name}}</span></li>
              <li><span> <strong>Contact No :</strong></span> <span class="">{{item.mobile}}</span></li>
            </ul>

            <ul class="jd-detail">
              <li class="lang-ellip"><span> <strong> User Name :</strong></span> <span class="">{{item.userName}}</span></li>
            </ul>
            <div class="clearfix"></div>
            <div class="job-list-action card-view-btns">
              <a href="javascript:void(0)" [ngClass]="(!item.isJobPushed && item.isScrap == false)?'postit':'viewit'"
                title="Replicate This Job" (click)="reCreateJob(item)" *ngIf="item.isJobPushed||item.isClosed||item.isScrap">Replicate</a>
              <a href="javascript:void(0)" class="revokeit" title="Scrap This Job" *ngIf="item.isJobPushed && item.isScrap == false && item.isClosed == false && item.isValidJob == true"
                (click)="scrapTemplate(template9)">Scrap</a>
              <a href="javascript:void(0)" class="viewit" title="Revoke This Job" *ngIf="item.isJobPushed && item.isScrap == false &&item.isClosed==false && item.isValidJob == true"
                (click)="RevokeTemplate(template)">Revoke</a>
              <a href="javascript:void(0)" class="revokeit" title="Close This Job" *ngIf="item.isJobPushed && item.isScrap == false && item.isClosed==false && item.isValidJob == true"
                (click)="RevokeTemplate(template4)">Close</a>
              <a href="javascript:void(0)" class="revokeit" title="Scraped Job" *ngIf="!item.isJobPushed && item.isScrap==true &&item.isClosed==false">Scraped</a>
              <a href="javascript:void(0)" class="revokeit" title="Closed Job" *ngIf=" item.isJobPushed && item.isScrap == false && item.isClosed">Closed</a>
              <a href="javascript:void(0)" class="postit" *ngIf="item.noofvacancy=='0' && !item.isJobPushed && 
            item.isValidJob && item.isScrap == false"
                title="Post This Job" (click)="AlertBox(template3)">Post</a>
              <a href="javascript:void(0)" class="postit" *ngIf="!item.isJobPushed  &&
            item.isValidJob && item.noofvacancy!='0' && item.isScrap == false"
                title="Post This Job" (click)="PushedTemplate(template2)">Post</a>
              <a href="javascript:void(0)" class="viewit" title="View This Job" [routerLink]="'/ViewJob'" *ngIf="item.isJobPushed || item.isScrap || item.isClosed"
                (click)="setId(item.jobId,item.isJobPushed,item.isScrap,item.userID)">View</a>
              <a href="javascript:void(0)" class="viewit" title="View This Job" [routerLink]="'/ViewJob'" *ngIf="!item.isJobPushed && !item.isScrap"
                (click)="setId(item.jobId,item.isJobPushed,item.isScrap,item.userID)">Edit/View</a>

              <a href="javascript:void(0)" class="viewit" title="View This Job" (click)="Download(DownloadTemplate,item)">Download</a>


              <!-- <a href="javascript:void(0)" class="postit" *ngIf="!item.isValidJob" title="Expired Job">Expired Job</a> -->
            </div>
          </li>
        </ul>
      </div>

    </div>
  </div>

  <div>

    <ng-template #DownloadTemplate>
      <div class="modal-header">
        <h6 class="modal-title pull-left">Job Details </h6>

        <button type="button" class="btn btn-w-shadow no-rd pull-right m-l-10" aria-label="Close" (click)="Close()"
          title="Close">
          Close
        </button>

        <button type="button" class="btn btn-w-shadow no-rd pull-right m-l-10" href="javascript:void(0)" aria-label="Close"
          (click)="GeneratePDF()" title="Download">
          Export to PDF
        </button>

        <button id="btn-export" class="btn btn-w-shadow no-rd pull-right" (click)="createDoc()">Export to
          Word Doc</button>

      </div>
      <div class="modal-body">
        <div id="DivContant">
          <span [innerHtml]="htmlget | KeepHtml: 'html'"></span>
        </div>
        <div id="editor"></div>

      </div>
    </ng-template>
    <!-- end special div 2-->